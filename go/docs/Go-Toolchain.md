## Go Toolchain

Go 툴 체인은 Go 언어로 개발하고 배포하는 데 필요한 모든 공식 도구 모음으로, 최신 버전의 툴 체인은 이전 Go 버전에 대한 하위 호환성을 지원한다

도구 목록
- `go` 명령: 모든 Go 관련 작업을 수행하는 데 사용되는 단일 명령어
- 컴파일러: Go 소스 코드를 기계어로 변환한다
- 어셈블러: Go는 자체적인 어셈블리어(`.s` 파일)를 지원한다
- 링커: 컴파일된 코드와 필요한 라이브러리(표준 라이브러리, 외부 모듈 등)를 연결하여 단일 실행 파일을 실행한다

go 주요 하위 명령
- `go`: 모든 하위 명령을 표시한다
- `go build`: Go 소스 코드를 실행 가능한 바이너리로 컴파일한다
- `go run`: 소스 코드를 컴파일하고 즉시 실행한다 (임시 실행용)
- `go test`: 테스트 수행
- `go install`: 패키지를 컴파일하고 실행 파일을 GOBIN 경로에 설치한다
- `go fmt`: Go 소스 코드를 표준 스타일로 자동 포맷한다
- `go get`: 단일 외부 Go 모듈 추가, 업그레이드/다운그레이드, 제거한다 (보통 `go intsall`을 더 사용함)
- `go mod`: 모듈 의존성 관리
- `go doc`: Go 패키지와 심볼에 대한 문서를 터미널에 표시한다
- `go help <sub command>`: 하위 명령에 대한 도움말을 표시한다

`go run`, `go build`, `go install` 명령만 컴파일러가 개입하여 문법 오류를 발견하면 에러를 발생시킨다

다만 주의를 표시하지 않는데 이는 `go vet` 명령을 통해 확인할 수 있다


## GOBIN, GOPATH 환경 변수

여타 프로그래밍 언어처럼 Go 언어 또한 Go 바이너리 파일 실행, 캐시 등을 위해 GOBIN과 GOPATH라고 하는 환경 변수를 사용한다

**GOBIN** 환경 변수는 Go 툴 체인이 설치된 Go 프로그램의 바이너리 실행 파일을 저장하는 디렉토리 경로를 지정하며, 인스톨러나 패키지 매니저를 통해 Go를 설치하면 자동으로 설정된다

mise를 사용하는 경우 GOBIN 경로를 프로젝트마다 설정한 버전으로 자동 설정하기 때문에 사용자가 별도로 설정하지 않아도 된다

```shell
# mise로 go 언어 설치
mise use -g go@1.24

# GOBIN 경로 출력
echo $GOBIN
/Users/hansanhha/.local/share/mise/installs/go/1.24.4/bin
```

주로 직접 개발한 CLI 도구나 다른 Go 프로젝트에서 재사용할 유틸리티 도구 등을 어디서든 쉽게 실행할 수 있도록 하기 위한 용도로 GOBIN을 사용한다

그래서 `go install`은 Go 패키지를 컴파일하고 설치할 때 최종 생성된 파일을 GOBIN 디렉토리에 저장한다

---

**GOPATH** 환경 변수는 Go 모듈을 사용하지 않는 레거시 프로젝트에서 Go 워크스페이스의 루트 디렉토리를 지정하는 데 사용되던 환경 변수이다

Go 모듈이 도입된 이후 크게 사용되지 않지만 레거시 코드베이스에서는 이를 이해하고 있어야 한다

GOPATH 워크스페이스는 다음과 같은 세 가지 표준 하위 디렉토리를 가진다
- src: Go 소스 코드를 저장하는 디렉토리이다. 각 프로젝트는 src 아래에 `github.com/username/projectname`과 같은 경로로 저장되었다
- pkg: 컴파일된 패키지 아카이브 파일(`*.a`)을 저장하는 곳으로 컴파일 시간을 단축하기 위해 사용한다
- bin: `go install` 명령어으로 설치된 실행 가능한 바이너리 파일을 저장한다

`go build` 또는 `go run`은 GOPATH 아래의 src 디렉토리에서 소스 코드를 찾았고, `go get`은 외부 모듈의 코드를 `$GOPATH/src` 아래에 다운로드했다

`import` 문에서 패키지를 참조할 때 GOPATH를 기준으로 상대 경로를 사용했다

Go 1.11 부터 Go 모듈이 도입되면서 GOPATH의 역할이 상당히 축소했다

대부분의 프로젝트가 `go.mod` 파일을 통해 자체적으로 의존성을 관리하기 때문에 프로젝트의 코드를 반드시 GOPATH내에 둘 필요가 없어졌다

현재는 `go.mod` 파일을 사용하지 않는 레거시 프로젝트가 GOPATH에서 작동하거나, GOBIN 환경 변수가 설정되지 않은 경우 `go install`은 `$GOPATH/bin`에 바이너리를 설치한다